from telebot import *
from telebot.types import InlineKeyboardMarkup, InlineKeyboardButton, WebAppInfo
from random import *

priv = ['–ü—Ä–∏–≤–µ—Ç, ', '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, ', '–ü—Ä–∏–≤—è–æ, ', '–•—ç–ª–æ—É, ', '–ö—É, ', '–ö–£, ', '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é, ',
        '–î–æ–±—Ä—ã–π –¥–µ–Ω—å, ', '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π, ']
zodiak = ["–æ–≤–µ–Ω", "—Ç–µ–ª–µ—Ü", "–±–ª–∏–∑–Ω–µ—Ü—ã", "—Ä–∞–∫", "–ª–µ–≤", "–¥–µ–≤–∞", "–≤–µ—Å—ã",
          "—Å–∫–æ—Ä–ø–∏–æ–Ω", "—Å—Ç—Ä–µ–ª–µ—Ü", "–∫–æ–∑–µ—Ä–æ–≥", "–≤–æ–¥–æ–ª–µ–π", "—Ä—ã–±—ã"]
nach = [' –≤—ã —É–≤–∏–¥–∏—Ç–µ ', ' –Ω–∞–π–¥—ë—Ç–µ ', ' –≤ –±–ª–∏–∂–∞–π—à–µ–º –±—É–¥—É—â–µ–º –≤–∞—Å –∂–¥—ë—Ç ', ' —Å–µ–≥–æ–¥–Ω—è –≤—ã —É–≤–∏–¥–∏—Ç–µ',
        ' –∑–∞–≤—Ç—Ä–∞ –æ–±–Ω–∞—Ä—É–∂–∏—Ç–µ ', ' –≤ —ç—Ç–æ–º –≥–æ–¥—É –≤–∞—Å –∂–¥—ë—Ç ', ' —ç—Ç–æ–π –Ω–æ—á—å—é –≤—ã –∑–∞–º–µ—Ç–∏—Ç–µ ']
sred = ['–ø—Ä–∏—è—Ç–Ω—ã–π —Å—é—Ä–ø—Ä–∏–∑ ', '–ø–æ–¥–∞—Ä–æ–∫ ', '–Ω–æ–≤–æ—Å—Ç—å ', '–∏–Ω—Ç–µ—Ä–µ—Å–Ω—É—é –≤–µ—â—å ', '–æ—Ç–∫—Ä—ã—Ç–∫—É ']
konec = ['–æ—Ç –ª—é–±–∏–º–æ–≥–æ(–æ–π)!', '–æ—Ç –Ω–µ–∑–Ω–∞–∫–æ–º—Ü–∞!', '–∏–∑ –Ω–∏–æ—Ç–∫—É–¥–∞?!', '–æ—Ç –±–ª–∏–∑–∫–æ–≥–æ!']

predscaz = [0] * 12
for i in range(12):
    predscaz[i] = choice(priv) + zodiak[i] + choice(nach) + choice(sred) + choice(konec)

bot = TeleBot('8272464178:AAHaLqkj8c_21dVHdVRLFUF1s2tdfHG17aM')

@bot.message_handler(commands=['start'])
def start(message):
    markup = InlineKeyboardMarkup()
    # –ó–∞–º–µ–Ω–∏ URL –Ω–∞ –∞–¥—Ä–µ—Å —Å–≤–æ–µ–≥–æ Mini App (—Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –Ω–∞ GitHub Pages, Vercel, Netlify)
    web_app = InlineKeyboardButton('üîÆ –û—Ç–∫—Ä—ã—Ç—å –≥–æ—Ä–æ—Å–∫–æ–ø', web_app=WebAppInfo(url='https://YOUR-MINI-APP-URL.com/index.html'))
    markup.add(web_app)
    bot.send_message(message.from_user.id, '–ü—Ä–∏–≤–µ—Ç! –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å —Å–≤–æ–π –≥–æ—Ä–æ—Å–∫–æ–ø –≤ Mini App!', reply_markup=markup)

@bot.message_handler(commands=['help'])
def help_command(message):
    bot.send_message(message.from_user.id, '–ù–∞–ø–∏—à–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞ (–æ–≤–µ–Ω, —Ç–µ–ª–µ—Ü...) –∏–ª–∏ –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É Mini App!')

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Mini App
@bot.message_handler(content_types=['web_app_data'])
def handle_web_app_data(message):
    zodiac_sign = message.web_app_data.data.lower().strip()
    
    # –ü–æ–∏—Å–∫ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –¥–ª—è –∑–Ω–∞–∫–∞
    found = False
    for i in range(12):
        if zodiac_sign == zodiak[i]:
            bot.send_message(message.from_user.id, predscaz[i])
            found = True
            break
    
    if not found:
        bot.send_message(message.from_user.id, '–ó–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞!')

@bot.message_handler(content_types=['text'])
def get_text_messages(message):
    text = message.text.lower().strip()

    if text == '/zz':
        bot.send_message(message.from_user.id, '–ü–†–ò–í–ï–¢–°–¢–í–£–Æ! –í–≤–µ–¥–∏ —Å–≤–æ–π –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞: ' + ', '.join(zodiak))
    else:
        found = False
        for i in range(12):
            if text == zodiak[i]:
                bot.send_message(message.from_user.id, predscaz[i])
                found = True

bot.polling(none_stop=True, interval=0)
